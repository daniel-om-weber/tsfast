---

title: Title
keywords: fastai
sidebar: home_sidebar

summary: "summary"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_core.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Codestructure">Codestructure<a class="anchor-link" href="#Codestructure">&#182;</a></h1><ol>
<li>Extract File Paths</li>
<li>Convert Paths to Sequence Objects (TensorSequence, TensorScalars, TensorSequence) &lt;-&gt; (input,input,output)</li>
<li>Data Manipulation<ol>
<li>Sequence pruning</li>
<li>Sequence Resampling</li>
</ol>
</li>
<li>Split Sequence Objects in Train, Validation</li>
<li>(Create Windows out of Sequence Objects)</li>
<li>Noise Injection in Training Dataset Input</li>
<li>Normalize Input </li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="1.-Extract-File-Paths">1. Extract File Paths<a class="anchor-link" href="#1.-Extract-File-Paths">&#182;</a></h2><p>Der erste Schritt kann mit get_files von fastai2 erledigt werden.</p>
<p>Alternativ kann dies mit weniger Code mit der get_hdf_files() Funktion erledigt werden.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">f_path</span> <span class="o">=</span> <span class="s1">&#39;test_data/&#39;</span>
<span class="n">hdf_files</span> <span class="o">=</span> <span class="n">get_files</span><span class="p">(</span><span class="n">f_path</span><span class="p">,</span><span class="n">extensions</span><span class="o">=</span><span class="s1">&#39;.hdf5&#39;</span><span class="p">,</span><span class="n">recurse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">hdf_files</span><span class="p">),</span><span class="n">hdf_files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(3, PosixPath(&#39;test_data/train/Sim_RealisticCycle2.hdf5&#39;))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_hdf_files" class="doc_header"><code>get_hdf_files</code><a href="https://github.com/daniel-om-weber/seqdata/tree/master/seqdata/core.py#L12" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_hdf_files</code>(<strong><code>path</code></strong>, <strong><code>recurse</code></strong>=<em><code>True</code></em>, <strong><code>folders</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Get hdf5 files in <code>path</code> recursively, only in <code>folders</code>, if specified.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hdf_files</span> <span class="o">=</span> <span class="n">get_hdf_files</span><span class="p">(</span><span class="n">f_path</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">hdf_files</span><span class="p">),</span><span class="n">hdf_files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(3, PosixPath(&#39;test_data/train/Sim_RealisticCycle2.hdf5&#39;))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="2.-Convert-Paths-to-Sequence-Objects">2. Convert Paths to Sequence Objects<a class="anchor-link" href="#2.-Convert-Paths-to-Sequence-Objects">&#182;</a></h2><p>Der Pfad wird unter Angabe der Spaltennamen in Sequenzen und Skalare Werte umgewandelt, um so am Ende ein 3-Tupel zu erhalten aus:</p>
<ul>
<li>(Sequence, Scalar, Sequence) &lt;-&gt; (input,input,output)</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="hdf2sequence" class="doc_header"><code>hdf2sequence</code><a href="https://github.com/daniel-om-weber/seqdata/tree/master/seqdata/core.py#L17" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>hdf2sequence</code>(<strong><code>hdf_path</code></strong>, <strong><code>c_names</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hdf2sequence</span><span class="p">(</span><span class="n">hdf_files</span><span class="p">[</span><span class="mi">0</span><span class="p">],[</span><span class="s1">&#39;current&#39;</span><span class="p">,</span><span class="s1">&#39;voltage&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(265598, 2)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Die Funktion lässt sich mittels Pipeline auf eine Liste von Quellobjekten (hier Pfade) anwenden</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="n">hdf2sequence</span><span class="p">,</span><span class="n">c_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">,</span><span class="s1">&#39;voltage&#39;</span><span class="p">]))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">res_pipe</span> <span class="o">=</span> <span class="n">pipe</span><span class="p">(</span><span class="n">hdf_files</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">res_pipe</span><span class="p">),</span> <span class="n">res_pipe</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(3, array([0.       , 4.1873503], dtype=float32))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="hdf2scalars" class="doc_header"><code>hdf2scalars</code><a href="https://github.com/daniel-om-weber/seqdata/tree/master/seqdata/core.py#L25" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>hdf2scalars</code>(<strong><code>hdf_path</code></strong>, <strong><code>c_names</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Tensor-Tuple-erstellen">Tensor Tuple erstellen<a class="anchor-link" href="#Tensor-Tuple-erstellen">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="Hdf2SeqSeq" class="doc_header"><code>class</code> <code>Hdf2SeqSeq</code><a href="https://github.com/daniel-om-weber/seqdata/tree/master/seqdata/core.py#L33" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>Hdf2SeqSeq</code>(<strong><code>seq_inp</code></strong>, <strong><code>seq_out</code></strong>) :: <code>Transform</code></p>
</blockquote>
<p>Delegates (<code>__call__</code>,<code>decode</code>,<code>setup</code>) to (<code>encodes</code>,<code>decodes</code>,<code>setups</code>) if <code>split_idx</code> matches</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="Hdf2SeqScal" class="doc_header"><code>class</code> <code>Hdf2SeqScal</code><a href="https://github.com/daniel-om-weber/seqdata/tree/master/seqdata/core.py#L39" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>Hdf2SeqScal</code>(<strong><code>seq_inp</code></strong>, <strong><code>scal_out</code></strong>) :: <code>Transform</code></p>
</blockquote>
<p>Delegates (<code>__call__</code>,<code>decode</code>,<code>setup</code>) to (<code>encodes</code>,<code>decodes</code>,<code>setups</code>) if <code>split_idx</code> matches</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="Hdf2SeqScalSeq" class="doc_header"><code>class</code> <code>Hdf2SeqScalSeq</code><a href="https://github.com/daniel-om-weber/seqdata/tree/master/seqdata/core.py#L44" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>Hdf2SeqScalSeq</code>(<strong><code>seq_inp</code></strong>, <strong><code>scal_inp</code></strong>, <strong><code>seq_out</code></strong>) :: <code>Transform</code></p>
</blockquote>
<p>Delegates (<code>__call__</code>,<code>decode</code>,<code>setup</code>) to (<code>encodes</code>,<code>decodes</code>,<code>setups</code>) if <code>split_idx</code> matches</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="Hdf2SeqScalScal" class="doc_header"><code>class</code> <code>Hdf2SeqScalScal</code><a href="https://github.com/daniel-om-weber/seqdata/tree/master/seqdata/core.py#L51" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>Hdf2SeqScalScal</code>(<strong><code>seq_inp</code></strong>, <strong><code>scal_inp</code></strong>, <strong><code>scal_out</code></strong>) :: <code>Transform</code></p>
</blockquote>
<p>Delegates (<code>__call__</code>,<code>decode</code>,<code>setup</code>) to (<code>encodes</code>,<code>decodes</code>,<code>setups</code>) if <code>split_idx</code> matches</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hdf2seq</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">Hdf2SeqSeq</span><span class="p">([</span><span class="s1">&#39;current&#39;</span><span class="p">,</span><span class="s1">&#39;voltage&#39;</span><span class="p">],[</span><span class="s1">&#39;voltage&#39;</span><span class="p">]))</span>

<span class="n">items</span> <span class="o">=</span> <span class="n">hdf2seq</span><span class="p">(</span><span class="n">hdf_files</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">),</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(3, (265598, 2))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="SequenceItem">SequenceItem<a class="anchor-link" href="#SequenceItem">&#182;</a></h3><p>Damit die Sequenz visualisiert werden kann und auch dritte Informationen gespeichert werden können, wird eine Klasse erstellt</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="SequenceItem" class="doc_header"><code>class</code> <code>SequenceItem</code><a href="https://github.com/daniel-om-weber/seqdata/tree/master/seqdata/core.py#L61" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>SequenceItem</code>(<strong><code>x</code></strong>=<em><code>None</code></em>, <strong>*<code>rest</code></strong>) :: <code>Tuple</code></p>
</blockquote>
<p>A <code>tuple</code> with elementwise ops and more friendly <strong>init</strong> behavior</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SequenceItem ist nur für die Darstellung eines Tupels von Sequenzen zuständig. Es muss zwischen Skalaren und Vektoriellen Zielgrößen unterschieden werden.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="SeqTfm" class="doc_header"><code>class</code> <code>SeqTfm</code><a href="https://github.com/daniel-om-weber/seqdata/tree/master/seqdata/core.py#L67" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>SeqTfm</code>(<strong><code>enc</code></strong>=<em><code>None</code></em>, <strong><code>dec</code></strong>=<em><code>None</code></em>, <strong><code>split_idx</code></strong>=<em><code>None</code></em>, <strong><code>as_item</code></strong>=<em><code>False</code></em>, <strong><code>order</code></strong>=<em><code>None</code></em>) :: <code>Transform</code></p>
</blockquote>
<p>Delegates (<code>__call__</code>,<code>decode</code>,<code>setup</code>) to (<code>encodes</code>,<code>decodes</code>,<code>setups</code>) if <code>split_idx</code> matches</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>SequenceTfm erstellt ein SequenceItem beim decoding für die spätere Darstellung.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="3.-Split-in-Training,-Validation">3. Split in Training, Validation<a class="anchor-link" href="#3.-Split-in-Training,-Validation">&#182;</a></h2><p>Splitting kann anhand von vorher bekannten Indizes, dem Dateipfad oder anderen allgemeinen Funktion durchgeführt werden.</p>
<p>Splitting innerhalb einer Sequenzen sollte in der Praxis nur dann geschehen wenn eine einzige Sequenz vorhanden ist. Diese kann dann vorher manuell geteilt werden.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3.1-Splitting-mit-vorgegebenem-Index">3.1 Splitting mit vorgegebenem Index<a class="anchor-link" href="#3.1-Splitting-mit-vorgegebenem-Index">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">splitter</span> <span class="o">=</span> <span class="n">IndexSplitter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">splitter</span><span class="p">(</span><span class="n">items</span><span class="p">),[[</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3.2-Splitting-mit-allgemeiner-Funktion">3.2 Splitting mit allgemeiner Funktion<a class="anchor-link" href="#3.2-Splitting-mit-allgemeiner-Funktion">&#182;</a></h3><p>Items, bei denen die definierte Funktion <code>True</code> zurück gibt, werden den Validierungsdatensatz zugeordnet, der Rest dem Training. In diesem Fall wird nach dem Übergeordneten Ordnernamen gesucht.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">splitter</span> <span class="o">=</span> <span class="n">FuncSplitter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">o</span><span class="p">:</span> <span class="n">Path</span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;valid&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">splitter</span><span class="p">(</span><span class="n">hdf_files</span><span class="p">),[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">]])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3.3-Splitting-anhand-des-Parent-Folders">3.3 Splitting anhand des Parent-Folders<a class="anchor-link" href="#3.3-Splitting-anhand-des-Parent-Folders">&#182;</a></h3><p>Splitter, der Explizit Training und Validierungsordner den Datensätzen zuordnet</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ParentSplitter" class="doc_header"><code>ParentSplitter</code><a href="https://github.com/daniel-om-weber/seqdata/tree/master/seqdata/core.py#L73" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ParentSplitter</code>(<strong><code>train_name</code></strong>=<em><code>'train'</code></em>, <strong><code>valid_name</code></strong>=<em><code>'valid'</code></em>)</p>
</blockquote>
<p>Split <code>items</code> from the parent folder names (<code>train_name</code> and <code>valid_name</code>).</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">splitter</span> <span class="o">=</span> <span class="n">ParentSplitter</span><span class="p">()</span>
<span class="n">split_idxs</span> <span class="o">=</span> <span class="n">splitter</span><span class="p">(</span><span class="n">hdf_files</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">split_idxs</span><span class="p">,[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">]])</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="4.-Create-Datasource">4. Create Datasource<a class="anchor-link" href="#4.-Create-Datasource">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dsrc</span> <span class="o">=</span> <span class="n">DataSource</span><span class="p">(</span><span class="n">items</span><span class="p">,</span><span class="n">splits</span><span class="o">=</span><span class="n">split_idxs</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">dsrc</span><span class="o">.</span><span class="n">train</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">dsrc</span><span class="o">.</span><span class="n">valid</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(2, 1)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dsrc</span><span class="o">.</span><span class="n">train</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>((array([[ 0.       ,  4.1873503],
         [-0.0052   ,  4.187454 ],
         [-0.009    ,  4.187548 ],
         ...,
         [ 1.0783   ,  3.7160358],
         [ 1.0739   ,  3.716139 ],
         [ 1.0706   ,  3.7162225]], dtype=float32), array([[4.1873503],
         [4.187454 ],
         [4.187548 ],
         ...,
         [3.7160358],
         [3.716139 ],
         [3.7162225]], dtype=float32)),)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="5.-Create-Windows">5. Create Windows<a class="anchor-link" href="#5.-Create-Windows">&#182;</a></h2><p>Aus einer langen Sequenz werden mehrere kurze Sequenzen extrahiert um so verschiedene Teile zu gleicher Zeit dem Model zu zeigen.</p>
<p>Dies geschieht auf Tuple level und ist deshalb kein TupleTransform</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span><span class="n">obj</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(64866, array([[3.735982 ],
        [3.7363622],
        [3.7367425],
        ...,
        [2.505974 ],
        [2.502833 ],
        [2.4996917]], dtype=float32))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Testen ob bei vervielfältigung sich der Speicherbedarf massiv ändert</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">temp</span> <span class="o">=</span> <span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">*</span><span class="mi">100000</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Untersuchung mittels Speicherbedarf bei htop zeigt, dass sich der Speicherbedarf selbst bei 10^5 facher Liste nicht um mehr als 10 MB ändert. Das ist die Darstellungsgrenze</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="createWindows" class="doc_header"><code>createWindows</code><a href="https://github.com/daniel-om-weber/seqdata/tree/master/seqdata/core.py#L81" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>createWindows</code>(<strong><code>x</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span> <span class="o">=</span> <span class="n">createWindows</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(100, 2)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pipe_tst</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">createWindows</span><span class="p">)</span>
<span class="n">lst</span> <span class="o">=</span> <span class="n">pipe_tst</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>95.5 ms ± 1.67 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
</pre>
</div>
</div>

</div>
</div>

</div>
</div>
 

